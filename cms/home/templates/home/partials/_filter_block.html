{% load staticfiles %}

<div id="filter-block" class="filters-block">
    {% if closed_list %}
    <form id="index-filters-form" action="{% url 'closed_examination_index' %}" method="get" aria-labelledby="filter-by-place-person">
        <!-- Prevent implicit submission of the form -->
        <button type="submit" disabled style="display: none" aria-hidden="true"></button>

        <!-- ... -->
        {% else %}
        <form id="index-filters-form" action="{% url 'index' %}" method="get" aria-labelledby="filter-by-place-person">
            <!-- Prevent implicit submission of the form -->
            <button type="submit" disabled style="display: none" aria-hidden="true"></button>

            <!-- ... -->
            {% endif %}
            <input value="{{session_user.index_overview.page_number}}" name="page_number" hidden/>

            <p><span id="filter-by-place-person">Filter cases by place and person</span></p>

            <div class="nhsuk-grid-row">
                <div class="nhsuk-grid-column-one-half">
                    <select class="nhsuk-select" id="filter-location" name="location" value="{{ form.location }}" aria-label="filter-location">
                        <option value="all">All</option>
                        {% for location in session_user.index_overview.filter_locations %}
                        <option value={{ location.location_id }} {% if location.location_id == form.location %}selected{% endif %}>
                            {{ location.name }}
                        </option>
                        {% endfor %}
                    </select>
                </div>

                <div class="nhsuk-grid-column-one-half">
                    <select class="nhsuk-select" id="filter-person" name="person" value="{{ form.person }}" aria-label="filter-person">
                        <option value="all">All</option>
                        {% for person in session_user.index_overview.filter_people %}
                        <option value={{ person.person_id }} {% if person.person_id == form.person %}selected{% endif %}>
                            {{ person.name }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <p>
                <span id="filter-by-place-person">Filter cases by status</span>
            </p>
            <div class="filter-list">
                <div class="filter-list__item">{% include 'home/partials/_filter_status_item.html' with count=19 label="admission details have been entered" icon="patient" active=False filter=enums.filters.F01_HAS_BASIC_DETAILS %}</div>
                <div class="filter-list__item">{% include 'home/partials/_filter_status_item.html' with count=17 label="are ready for ME scrutiny" icon="ready" active=True filter=enums.filters.F02_READY_FOR_SCRUTINY %}</div>
                <div class="filter-list__item">{% include 'home/partials/_filter_status_item.html' with count=8 label="are unassigned" icon="unassigned" active=False filter=enums.filters.F03_UNASSIGNED %}</div>
                <div class="filter-list__item">{% include 'home/partials/_filter_status_item.html' with count=7 label="have been scrutinised by an ME" icon="complete" active=False filter=enums.filters.F04_HAVE_BEEN_SCRUTINISED %}</div>
                <div class="filter-list__item">{% include 'home/partials/_filter_status_item.html' with count=6 label="are pending hospital admission details" icon="waiting" active=False filter=enums.filters.F05_PENDING_ADMISSION_DETAILS %}</div>
                <div class="filter-list__item">{% include 'home/partials/_filter_status_item.html' with count=5 label="are pending discussion with a QAP" icon="waiting" active=False filter=enums.filters.F06_PENDING_QAP %}</div>
                <div class="filter-list__item">{% include 'home/partials/_filter_status_item.html' with count=3 label="are pending discussion with a representative" icon="waiting" active=False filter=enums.filters.F07_PENDING_BEREAVED %}</div>
                <div class="filter-list__item">{% include 'home/partials/_filter_status_item.html' with count=2 label="have final case outcomes outstanding" icon="waiting" active=False filter=enums.filters.F08_OUTSTANDING_FINAL_OUTCOMES %}</div>
            </div>
        </form>
</div>